# Предисловие

В данном руководстве будет рассказано и показано как установить всё необходимое для создания копии начинки нашего устройства.
Первым делом необходимо установить *ArduinoIDE*, в котором будет производиться работа с нашим продуктом.

# Установка ArduinoIDE

Найти данную программу можно найти на [оффициальном сайте компании Arduino](https://www.arduino.cc/en/software).

![image](https://user-images.githubusercontent.com/102234463/166157753-82178e8b-a5e1-4c4c-9113-2db8609e7b74.png)

Скачиваем файл и начианем установку программы.

# Перепрошивание Digispark

Для того что бы использовать стандартный *Digispark* нам необходимо его перепрошить, так как изначально его пин *P5* используется как *Reset*.
Для этого нам необходимо для начала установить *AVRDude*. Он содержится в пакете программ *WinAVR*. Скачать его можно с их [сайта](http://winavr.sourceforge.net/index.html). Переходим на вкладку *Download* и скачиваем необоходимую нам программу, а после загрузки устанавливаем её.
При установке в окне с дополнительными функциями установки рекомендуется убрать галочку с последнего пункта, если вы не нуждаетесь в новом текстовом редакторе.

![image](https://user-images.githubusercontent.com/102234463/166182229-03588ff5-6582-4827-a518-08880f638cf6.png)

Далее нам необходимо прошить одну из плат Arduino в качестве программатора. В качестве примера будет использоваться плата *Arduino Uno*.
Открываем *ArduimoIDE* и открываем уже готовый скетч программатора.

![image](https://user-images.githubusercontent.com/102234463/166183391-2d240e96-6c54-42f9-b889-5cd9acc0e34f.png)

Далее необходимо произвести преварительную настройку и выбрать всё необходимое во вкладке *Инструменты*

![image](https://user-images.githubusercontent.com/102234463/166183982-c10da803-119d-41c0-839b-1e8adfe63fa3.png)

После этих действий мы подключаем *Digispark* к *Arduino Uno* в таком порядке:

    Arduino --> Digispark 
    GND     --> GND
    5v      --> 5v
    10      --> P5
    11      --> P0
    12      --> P1
    13      --> P2

Далее мы загружаем скетч к подключенной *Arduino Uno* и открываем командную строку.
В ней мы прописываем две команды, где на месте *COMx* должен быть номер порта вашей *Arduino*. В нашем случае это *COM5*.

    avrdude -P COMx -b 19200 -c avrisp -p attiny85 -n
    avrdude -P COMx -b 19200 -p attiny85 -c avrisp  -U hfuse:w:0x5F:

Если после перепрошивания устройства *AVRDude* не выдал никаких ошибок, то можно двигаться дальше.
После того как мы успешно разблокировали пин *P5*, мы подключаем к плате 4 кнопки

    Digispark --> Кнопки
    P0        --> Первая    (CTRL)
    P1        --> Вторая    (WIN)
    P2        --> Третья    (C)
    P5        --> Четвертая (V)

# Установка ПО для работы с Digispark

Далее необходимо установить драйвера для работы с платами *Digistump*.
Вы можете найти их на [оффициальной странице GitHub Digistump](https://github.com/digistump/DigistumpArduino/releases), либо же сразу скачать [zip архив](https://github.com/syrovezhko/developer-keyboard/files/8599401/Digistump.Drivers.zip), скачанный с их страницы GitHub и добавленный сюда.

![image](https://user-images.githubusercontent.com/102234463/166157907-c6353381-e389-466a-91b8-7fc6beb389b9.png)

Также скачиваем файлы, разархивируем их и запускаем файл *"Install Drivers.exe"* и соглашаемся со всем что нам предлагают.

После всех проделанных нами действий нам необходимо добавить платы *Digistump* в *ArduinoIDE*.
Открываем вкладку Файл и заходим в настройки приложения. Там указываем ссылку в строке для доп. ссылок менеджера плат.

    http://digistump.com/package_digistump_index.json

![image](https://user-images.githubusercontent.com/102234463/166158270-bdd50854-a0db-421d-8b55-4f489ececadc.png)
![image](https://user-images.githubusercontent.com/102234463/166158395-d66af0d3-269b-442f-b805-67cbd09cbf74.png)

Далее необходимо установить платы *Digistump* в ПО *Arduino*.
![image](https://user-images.githubusercontent.com/102234463/166158639-11ce110c-5e59-44f6-91e4-255c234bd00c.png)

В новом окне в поисковой строке необходимо найти *"Digistump AVR boards"* и добавить их в *ArduinoIDE*.
![image](https://user-images.githubusercontent.com/102234463/166158708-80052682-5223-47d1-917f-e57de0e9aef3.png)

Далее при перепрограмировании нашего устройства необходимо будет выбирать плату *Digispark* в новой вкладке с платами.
![image](https://user-images.githubusercontent.com/102234463/166158847-3de4d9da-c890-4738-ac5e-dc8615075472.png)

### *При подключении к компьютеру устройство автомотически идентифицируется как HID-устройство, так что его можно использовать с любым ПК.*

# Заключение

На этом данное руководство подоходит к концу, вы выполнили все действия, необходимые для работы с Клавиатурой Истинного Разработчика.
